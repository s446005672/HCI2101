<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù„Ø¹Ø¨Ø© Ø§Ù„Ø°Ø§ÙƒØ±Ø© Ø§Ù„Ø­Ø¯ÙŠØ«Ø©</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #6366f1;
            --secondary: #ec4899;
            --bg: #f8fafc;
            --card-back: #1e293b;
            --text: #1e293b;
        }

        * {
            box-sizing: border-box;
            font-family: 'Tajawal', sans-serif;
            margin: 0;
            padding: 0;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            align-items: center;
        }

        /* Ø§Ù„Ø´Ø§Ø´Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        #start-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            flex-grow: 1;
            gap: 20px;
            padding: 20px;
            text-align: center;
        }

        .card-panel {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            max-width: 400px;
            width: 100%;
        }

        h1 { color: var(--primary); margin-bottom: 20px; }

        input {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 16px;
            outline: none;
            transition: border-color 0.3s;
        }

        input:focus { border-color: var(--primary); }

        button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 18px;
            font-weight: bold;
            transition: transform 0.2s, background 0.3s;
            width: 100%;
            margin-top: 10px;
        }

        button:hover { background: #4f46e5; transform: translateY(-2px); }

        /* Ù…Ù†Ø·Ù‚Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© */
        #game-screen { display: none; padding: 20px; width: 100%; max-width: 600px; flex-grow: 1; }

        .stats-bar {
            display: flex;
            justify-content: space-between;
            background: white;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }

        .player-info { padding: 5px 15px; border-radius: 8px; transition: all 0.3s; }
        .active-player { background: var(--primary); color: white; transform: scale(1.05); }

        .grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            perspective: 1000px;
        }

        .card {
            aspect-ratio: 1/1;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
        }

        .card.flipped { transform: rotateY(180deg); }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .card-back { background: var(--card-back); color: white; }
        .card-front { background: white; transform: rotateY(180deg); border: 2px solid var(--primary); }

        /* Ø§Ù„ØªØ°ÙŠÙŠÙ„ Ø§Ù„Ø¥Ø¬Ø¨Ø§Ø±ÙŠ */
        footer {
            background: #1e293b;
            color: #f8fafc;
            width: 100%;
            padding: 20px;
            text-align: center;
            font-size: 14px;
            line-height: 1.6;
            margin-top: auto;
        }

        .highlight { color: #38bdf8; font-weight: bold; }

        @media (max-width: 400px) {
            .grid { grid-template-columns: repeat(3, 1fr); }
            .card-front { font-size: 1.5rem; }
        }
    </style>
</head>
<body>

    <div id="start-screen">
        <div class="card-panel">
            <h1>Ù„Ø¹Ø¨Ø© Ù…Ø·Ø§Ø¨Ù‚Ø© Ø§Ù„Ø°Ø§ÙƒØ±Ø©</h1>
            <p>Ø§Ø®ØªØ± Ù†Ù…Ø· Ø§Ù„Ù„Ø¹Ø¨ ÙˆØ§Ø¯Ø®Ù„ Ø§Ù„Ø£Ø³Ù…Ø§Ø¡:</p>
            <input type="text" id="p1-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø£ÙˆÙ„" value="Ù„Ø§Ø¹Ø¨ 1">
            <input type="text" id="p2-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ø«Ø§Ù†ÙŠ (Ù„Ù†Ù…Ø· Ù„Ø§Ø¹Ø¨ÙŠÙ†)" value="Ù„Ø§Ø¹Ø¨ 2">
            
            <div style="display: flex; gap: 10px;">
                <button onclick="startGame(1)">Ù„Ø§Ø¹Ø¨ ÙˆØ§Ø­Ø¯</button>
                <button onclick="startGame(2)" style="background: var(--secondary);">Ù„Ø§Ø¹Ø¨ÙŠÙ†</button>
            </div>
        </div>
    </div>

    <div id="game-screen">
        <div class="stats-bar">
            <div id="p1-display" class="player-info">
                <span id="p1-label">Ø§Ù„Ù„Ø§Ø¹Ø¨ 1</span>: <span id="p1-score">0</span>
            </div>
            <div id="timer-display" class="player-info">Ø§Ù„ÙˆÙ‚Øª: <span id="timer">0</span></div>
            <div id="p2-display" class="player-info" style="display:none;">
                <span id="p2-label">Ø§Ù„Ù„Ø§Ø¹Ø¨ 2</span>: <span id="p2-score">0</span>
            </div>
        </div>
        <div class="grid" id="grid"></div>
        <button onclick="resetGame()" style="margin-top: 20px; background: #64748b;">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ù‚Ø§Ø¦Ù…Ø©</button>
    </div>

    <footer>
        <div>Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨: <span class="highlight">ÙÙŠØµÙ„ Ù…Ø­Ù…Ø¯ Ø³Ù„ÙŠÙ… Ø§Ù„Ø³Ù‡Ù„ÙŠ</span></div>
        <div>Ø§Ù„Ø±Ù‚Ù… Ø§Ù„Ø¬Ø§Ù…Ø¹ÙŠ: <span class="highlight">446005672</span></div>
        <div>Ø¨Ø¥Ø´Ø±Ø§Ù Ø§Ù„Ø¯ÙƒØªÙˆØ±: <span class="highlight">Ù…Ø­Ù…Ø¯ Ø£Ø­Ù…Ø¯ Ø¬Ø¨Ø§Ù„ÙŠ</span></div>
    </footer>

    <script>
        const emojis = ['ğŸ', 'ğŸŒ', 'ğŸ‰', 'ğŸ‡', 'ğŸ“', 'ğŸ’', 'ğŸ', 'ğŸ¥'];
        let cards = [];
        let flippedCards = [];
        let scores = [0, 0];
        let currentPlayer = 0;
        let gameMode = 1;
        let timerInterval;
        let seconds = 0;
        let canFlip = true;

        function startGame(mode) {
            gameMode = mode;
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('game-screen').style.display = 'block';
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø£Ø³Ù…Ø§Ø¡
            document.getElementById('p1-label').innerText = document.getElementById('p1-name').value;
            if(mode === 2) {
                document.getElementById('p2-display').style.display = 'block';
                document.getElementById('p2-label').innerText = document.getElementById('p2-name').value;
                switchPlayer(0);
            }

            initGame();
            startTimer();
        }

        function initGame() {
            const grid = document.getElementById('grid');
            grid.innerHTML = '';
            const gameIcons = [...emojis, ...emojis].sort(() => Math.random() - 0.5);
            
            gameIcons.forEach((icon, index) => {
                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <div class="card-back">?</div>
                    <div class="card-front">${icon}</div>
                `;
                card.dataset.icon = icon;
                card.onclick = () => flipCard(card);
                grid.appendChild(card);
            });
        }

        function flipCard(card) {
            if (!canFlip || card.classList.contains('flipped') || flippedCards.length === 2) return;

            card.classList.add('flipped');
            flippedCards.push(card);

            if (flippedCards.length === 2) {
                checkMatch();
            }
        }

        function checkMatch() {
            canFlip = false;
            const [c1, c2] = flippedCards;
            
            if (c1.dataset.icon === c2.dataset.icon) {
                scores[currentPlayer]++;
                updateScores();
                flippedCards = [];
                canFlip = true;
                checkWin();
            } else {
                setTimeout(() => {
                    c1.classList.remove('flipped');
                    c2.classList.remove('flipped');
                    flippedCards = [];
                    if (gameMode === 2) switchPlayer(1 - currentPlayer);
                    canFlip = true;
                }, 1000);
            }
        }

        function switchPlayer(index) {
            currentPlayer = index;
            document.getElementById('p1-display').classList.toggle('active-player', index === 0);
            document.getElementById('p2-display').classList.toggle('active-player', index === 1);
        }

        function updateScores() {
            document.getElementById('p1-score').innerText = scores[0];
            document.getElementById('p2-score').innerText = scores[1];
        }

        function startTimer() {
            seconds = 0;
            timerInterval = setInterval(() => {
                seconds++;
                document.getElementById('timer').innerText = seconds;
            }, 1000);
        }

        function checkWin() {
            const totalMatches = document.querySelectorAll('.flipped').length;
            if (totalMatches === emojis.length * 2) {
                clearInterval(timerInterval);
                let msg = `Ù…Ø¨Ø±ÙˆÙƒ! Ø§Ù†ØªÙ‡Øª Ø§Ù„Ù„Ø¹Ø¨Ø© ÙÙŠ ${seconds} Ø«Ø§Ù†ÙŠØ©.`;
                if(gameMode === 2) {
                    const winner = scores[0] > scores[1] ? document.getElementById('p1-label').innerText : document.getElementById('p2-label').innerText;
                    msg = scores[0] === scores[1] ? "ØªØ¹Ø§Ø¯Ù„!" : `Ø§Ù„ÙØ§Ø¦Ø² Ù‡Ùˆ: ${winner}`;
                }
                alert(msg);
            }
        }

        function resetGame() {
            clearInterval(timerInterval);
            document.getElementById('start-screen').style.display = 'flex';
            document.getElementById('game-screen').style.display = 'none';
            scores = [0, 0];
            updateScores();
        }
    </script>
</body>
</html>